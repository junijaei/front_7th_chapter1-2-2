# 에이전트 생성 가이드라인

이 문서는 **LLM이 새로운 에이전트를 생성할 때 반드시 따라야 하는 기준**을 정의한다.  
모든 에이전트는 명확한 역할, 책임, 입출력 구조를 가져야 하며 기존 워크플로우와의 정합성을 유지해야 한다.

---

## 1. 기본 원칙
1. 에이전트는 **하나의 명확한 목적**과 **책임 범위(Scope)** 를 가진다.  
2. 이미 존재하는 에이전트와 **역할이 중복되지 않아야** 한다.  
3. 다른 에이전트와의 **데이터 의존성 및 전달 흐름**을 명확히 정의한다.  
4. 생성되는 에이전트는 **독립 실행 가능**해야 하며, 외부 파일 의존 시 명시적으로 참조해야 한다.  
5. 모든 산출물은 **Markdown 형식**을 기본으로 하며, 코드 작성이 필요한 경우에만 코드 파일을 출력한다.

---

## 2. 생성 절차

### 2.1 생성 순서
1. **에이전트 프롬프트 작성**  
   → `.claude/agents/[agent-name].md`
2. **출력 템플릿 작성**  
   → `.claude/docs/templates/[agent-name]-output.md`
3. **체크리스트 작성**  
   → `.claude/docs/check-lists/[agent-name]-checklist.md`
4. **기존 파일 업데이트**
   - `.claudes/workflow.md` → 에이전트 워크플로우 업데이트  
   - **Upstream 에이전트 프롬프트** → 다음 단계 에이전트 참조 정보 추가  

---

## 3. 생성 시 고려사항
1. **역할 정의**
   - 수행 목적, 주요 기능, 제약사항을 간결하게 기술한다.  
   - 중복되는 책임이 없는지 반드시 확인한다.
2. **입출력 명세**
   - 입력 데이터의 형식과 출력 형식을 명확히 정의한다.  
   - 다른 에이전트와의 인터페이스 규칙을 준수한다.
3. **워크플로우 연동**
   - 어느 단계에서 동작하며, 결과를 누구에게 전달하는지 명시한다.  
   - “다음 에이전트” 항목을 반드시 포함한다.
4. **버전 관리**
   - 생성된 모든 문서는 버전 번호와 생성 일자를 포함한다.  
   - 변경 이력은 `.claudes/docs/changelogs`에 기록한다.

---

## 4. 디렉토리 구조
```
.claudes/
├─ agents/           # 실제 에이전트 정의 파일
├─ docs/
│   ├─ check-lists/  # 검증용 체크리스트
│   ├─ templates/    # 출력 템플릿
│   ├─ specs/        # I/O 및 데이터 구조 정의
│   ├─ workflows/    # 에이전트 간 데이터 흐름 정의
│   └─ changelogs/   # 변경 이력
```

---

## 5. 자주 하는 실수 및 방지 기준

### 5.1 책임 중복
- **잘못된 예시:**  
  - 기존 에이전트: “기능 요구사항 정의”  
  - 신규 에이전트: “기능 명세 작성”  
  → 이름만 다르고 같은 책임이면 **중복**
- **올바른 원칙:**  
  - 역할의 범위, 산출물, 상위/하위 관계를 명확히 구분해야 함.

### 5.2 입력 불명확
- **잘못된 예시:** “프로젝트 정보”  
- **올바른 예시:** “Requirements.md (요구사항 명세서)”  
→ 입력 파일이나 데이터의 **정확한 출처**를 명시해야 함.

### 5.3 Handoff 누락
- **원칙:**  
  프롬프트에 **“다음 에이전트” 섹션이 반드시 포함**되어야 함.  
  다음 단계로 결과가 전달되지 않으면 워크플로우가 단절된다.

### 5.4 Context Loss
- **잘못된 예시:** “자세한 내용은 다른 문서 참고”  
- **올바른 예시:** “이 파일에 모든 필요 정보 포함”  
→ 프롬프트는 항상 **자급자족(self-contained)** 구조로 작성해야 함.

### 5.5 제약 불명확
- **잘못된 예시:** “기술 스택 선택하지 말 것”  
- **올바른 예시:** “새로운 라이브러리 추천 금지 (Architect의 몫)”  
→ 제약사항은 **행위의 범위와 책임 주체**를 명확히 지정해야 함.

---

## 6. 생성 체크리스트
- [ ] 명확한 역할과 책임이 정의되어 있는가  
- [ ] 기존 에이전트와 기능이 중복되지 않는가  
- [ ] 입출력 형식이 명확하게 규정되어 있는가  
- [ ] 워크플로우 상 위치와 다음 에이전트가 정의되어 있는가  
- [ ] 체크리스트와 버전 관리 절차를 준수했는가  
- [ ] 프롬프트가 자급자족적이며 의존 정보가 누락되지 않았는가  

---

**이 문서는 LLM이 새로운 에이전트를 생성할 때 반드시 준수해야 하는 표준 절차이다.**