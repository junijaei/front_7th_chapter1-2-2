# Product Requirements Document (PRD)

**프로젝트명**: 캘린더 반복 일정 기능
**버전**: 1.0.0
**작성일**: 2025-01-29
**작성자**: Product Manager (PM Agent)
**상태**: Draft
**프로젝트 ID**: PROJ-001-20250129

---

## 1. 프로젝트 개요

### 1.1 프로젝트 목표
캘린더 애플리케이션에 반복 일정 기능을 구현하여 사용자가 매일, 매주, 매월, 매년 반복되는 일정을 효율적으로 관리할 수 있도록 한다.

### 1.2 배경 및 동기
- 사용자들은 정기적으로 발생하는 일정(회의, 운동, 기념일 등)을 매번 수동으로 입력해야 하는 불편함을 겪고 있음
- 반복 일정 기능은 사용자 경험을 개선하고 일정 관리의 효율성을 높이는 핵심 기능
- 반복 일정의 수정/삭제 시 사용자가 단일 수정 또는 전체 수정을 선택할 수 있어야 함

### 1.3 성공 기준
- [ ] 4가지 반복 유형(매일, 매주, 매월, 매년)을 모두 지원
- [ ] 반복 일정이 캘린더 뷰에서 명확히 구분되어 표시됨
- [ ] 반복 종료 조건(특정 날짜까지)이 정상 작동
- [ ] 단일 수정/삭제와 전체 수정/삭제 기능이 정확히 동작
- [ ] 엣지 케이스(31일, 윤년 29일 등) 처리가 명확히 정의됨

---

## 2. 범위 (Scope)

### 2.1 포함 사항 (In Scope)
- 반복 유형 선택 기능 (매일, 매주, 매월, 매년)
- 반복 종료 조건 설정 (특정 날짜까지, 최대 2025-12-31)
- 캘린더 뷰에서 반복 일정 시각적 구분 (아이콘)
- 반복 일정의 단일/전체 수정 기능
- 반복 일정의 단일/전체 삭제 기능
- 월말 및 윤년 처리 로직

### 2.2 제외 사항 (Out of Scope)
- 반복 일정 간 겹침 검사 및 경고
- "N회 반복 후 종료" 옵션
- 복잡한 반복 패턴 (격주, 특정 요일 조합 등)
- 알림/푸시 기능
- 다중 사용자 간 일정 공유

### 2.3 향후 고려 사항 (Future Considerations)
- 반복 횟수 지정 옵션 추가
- 격주, 격월 등 더 복잡한 반복 패턴 지원
- 반복 일정 예외 날짜 지정 기능
- 반복 일정 일괄 내보내기/가져오기

---

## 3. 주요 기능 (Features)

### Feature 1: 반복 유형 선택
**우선순위**: High
**티켓**: PROJ-007

**설명**:
일정 생성 또는 수정 시 사용자가 반복 유형을 선택할 수 있는 기능

**핵심 요구사항**:
- 4가지 반복 유형 지원: 매일, 매주, 매월, 매년
- 매월 반복 시 31일 처리 규칙
  - 31일에 매월 반복 선택 시: 31일이 없는 달(2, 4, 6, 9, 11월)에는 일정 생성 안 함
  - 31일이 존재하는 달에만 일정 생성
- 매년 반복 시 윤년 처리 규칙
  - 2월 29일에 매년 반복 선택 시: 윤년에만 일정 생성
  - 평년에는 일정 생성 안 함
- 반복 일정은 다른 일정과의 겹침을 고려하지 않음

**UI/UX 요구사항**:
- 일정 생성/수정 폼에 반복 유형 선택 드롭다운 또는 라디오 버튼
- 선택 옵션: "반복 안 함", "매일", "매주", "매월", "매년"

---

### Feature 2: 반복 일정 표시
**우선순위**: High
**티켓**: PROJ-008

**설명**:
캘린더 뷰에서 반복 일정을 일반 일정과 구분하여 시각적으로 표시

**핵심 요구사항**:
- 반복 일정에 전용 아이콘 표시 (예: 순환 화살표 아이콘)
- 아이콘은 일정 항목에 명확히 표시되어 사용자가 즉시 구분 가능
- 일반 일정과 반복 일정의 시각적 차이 명확화

**UI/UX 요구사항**:
- 아이콘 위치: 일정 제목 옆 또는 일정 카드 모서리
- 아이콘 크기: 가독성을 해치지 않는 적절한 크기
- 아이콘 색상: 브랜드 컬러 또는 중립적인 색상

---

### Feature 3: 반복 종료 조건
**우선순위**: High
**티켓**: PROJ-009

**설명**:
반복 일정의 종료 조건을 설정할 수 있는 기능

**핵심 요구사항**:
- 종료 조건 옵션: "특정 날짜까지"
- 종료 날짜 범위: 최대 2025-12-31까지 설정 가능
- 종료 날짜를 지정하지 않으면 2025-12-31을 기본 종료일로 사용
- 종료 날짜 이후에는 반복 일정이 생성되지 않음

**UI/UX 요구사항**:
- 반복 유형 선택 시 종료 조건 입력 필드 활성화
- 날짜 선택: 달력 피커 제공
- 종료 날짜 유효성 검사: 시작 날짜보다 이후여야 함

**제약사항**:
- 최대 종료 날짜: 2025-12-31 (예제 특성상 제한)
- 무한 반복 옵션은 제공하지 않음

---

### Feature 4: 반복 일정 수정
**우선순위**: High
**티켓**: PROJ-010

**설명**:
반복 일정 수정 시 단일 수정 또는 전체 수정을 선택할 수 있는 기능

**핵심 요구사항**:
1. **수정 확인 다이얼로그 표시**
   - 텍스트: "해당 일정만 수정하시겠어요?"
   - 버튼: "예", "아니오"

2. **"예" 선택 시 (단일 수정)**
   - 선택한 날짜의 일정만 수정됨
   - 해당 일정은 반복 일정에서 분리되어 단일 일정으로 전환됨
   - 반복 일정 아이콘 제거됨
   - 다른 날짜의 반복 일정은 영향받지 않음

3. **"아니오" 선택 시 (전체 수정)**
   - 해당 반복 일정의 모든 인스턴스가 수정됨
   - 반복 일정 속성 유지됨
   - 반복 일정 아이콘 유지됨
   - 반복 유형, 종료 날짜 등도 함께 수정 가능

**UI/UX 요구사항**:
- 반복 일정 클릭 시 수정 모드 진입
- 확인 다이얼로그는 명확하고 직관적이어야 함
- 단일 수정된 일정은 시각적으로 일반 일정과 동일하게 표시

**예외 처리**:
- 단일 수정 후 다시 반복 일정으로 변경 불가
- 단일 수정된 일정은 원래 반복 그룹과 독립적으로 관리됨

---

### Feature 5: 반복 일정 삭제
**우선순위**: High
**티켓**: PROJ-011

**설명**:
반복 일정 삭제 시 단일 삭제 또는 전체 삭제를 선택할 수 있는 기능

**핵심 요구사항**:
1. **삭제 확인 다이얼로그 표시**
   - 텍스트: "해당 일정만 삭제하시겠어요?"
   - 버튼: "예", "아니오"

2. **"예" 선택 시 (단일 삭제)**
   - 선택한 날짜의 일정만 삭제됨
   - 다른 날짜의 반복 일정은 유지됨
   - 삭제된 날짜에는 일정이 표시되지 않음

3. **"아니오" 선택 시 (전체 삭제)**
   - 해당 반복 일정의 모든 인스턴스가 삭제됨
   - 시작 날짜부터 종료 날짜까지의 모든 반복 일정 제거됨
   - 반복 일정 그룹 자체가 삭제됨

**UI/UX 요구사항**:
- 삭제 버튼 클릭 시 확인 다이얼로그 즉시 표시
- 다이얼로그는 실수 방지를 위해 명확한 문구 사용
- "전체 삭제" 선택 시 추가 경고 또는 확인 단계 고려

**예외 처리**:
- 단일 삭제 후 복구 불가 (또는 실행 취소 기능 제공 고려)
- 전체 삭제는 되돌릴 수 없음을 사용자에게 명확히 안내

---

## 4. 사용자 및 이해관계자

### 4.1 대상 사용자 (Target Users)
- **일반 사용자**: 개인 일정을 관리하는 모든 사용자
- **직장인**: 정기 회의, 업무 일정을 관리하는 사용자
- **학생**: 수업, 과제 등 반복 일정이 많은 사용자
- **개인 관리 중심 사용자**: 운동, 습관 등 반복 활동을 추적하는 사용자

### 4.2 이해관계자 (Stakeholders)
- **개발팀**: 프론트엔드 개발자, 백엔드 개발자
- **디자인팀**: UI/UX 디자이너
- **QA팀**: 테스트 엔지니어
- **프로덕트팀**: PM, PO

---

## 5. 제약사항 (Constraints)

### 5.1 기술적 제약사항
- 프론트엔드 프레임워크: (기존 프로젝트 스택 사용)
- 날짜 처리 라이브러리: 윤년, 월말 계산을 정확히 처리할 수 있는 라이브러리 필요
- 브라우저 지원: 모던 브라우저 (Chrome, Firefox, Safari, Edge 최신 버전)
- 반응형 디자인: 모바일, 태블릿, 데스크톱 모두 지원

### 5.2 일정 및 리소스
- **개발 기간**: 약 2-3주 예상
- **팀 구성**: 프론트엔드 개발자 1-2명, 디자이너 1명
- **우선순위**: 높음 (핵심 기능)

### 5.3 기타 제약사항
- 반복 일정은 일정 겹침을 고려하지 않음 (명시적 제외)
- 최대 종료 날짜는 2025-12-31로 제한 (예제 특성)
- 복잡한 반복 패턴은 지원하지 않음 (단순 4가지 유형만)

---

## 6. 의존성 (Dependencies)

### 6.1 외부 의존성
- 날짜/시간 처리 라이브러리 (예: date-fns, Day.js, Luxon)
- 아이콘 라이브러리 (예: Font Awesome, Material Icons)

### 6.2 내부 의존성
- 기존 캘린더 뷰 컴포넌트
- 기존 일정 CRUD API
- 일정 데이터 모델 확장 필요 (반복 정보 필드 추가)

---

## 7. 리스크 및 가정 사항

### 7.1 주요 리스크

| 리스크 | 영향도 | 확률 | 완화 방안 |
|--------|--------|------|-----------|
| 윤년 및 월말 처리 로직 오류 | High | Medium | 철저한 단위 테스트, 엣지 케이스 시나리오 작성 |
| 단일/전체 수정 로직 복잡도 | High | Medium | 명확한 데이터 모델 설계, 코드 리뷰 강화 |
| 성능 이슈 (반복 일정 대량 생성 시) | Medium | Low | 가상 렌더링, 페이징 처리 고려 |
| UI/UX 혼란 (단일/전체 선택) | Medium | Medium | 사용자 테스트, 명확한 문구 사용 |

### 7.2 가정 사항 (Assumptions)
- 사용자는 반복 일정과 단일 일정의 차이를 이해할 수 있음
- 백엔드 API는 반복 일정 데이터를 저장하고 조회할 수 있음
- 기존 캘린더 UI는 아이콘 추가를 지원할 수 있음
- 사용자는 "해당 일정만" vs "모든 반복 일정" 선택의 의미를 이해할 수 있음

---

## 8. 데이터 모델 (간략)

### 8.1 반복 일정 데이터 구조 (예시)
```javascript
{
  id: "event-123",
  title: "주간 회의",
  startDate: "2025-01-29",
  endDate: "2025-01-29",
  isRecurring: true,
  recurrence: {
    type: "weekly",        // "daily" | "weekly" | "monthly" | "yearly"
    endDate: "2025-12-31",
    exceptions: ["2025-03-15"] // 단일 수정/삭제된 날짜
  }
}
```

### 8.2 단일 일정으로 전환된 데이터 (예시)
```javascript
{
  id: "event-123-20250305",
  title: "주간 회의 (수정됨)",
  startDate: "2025-03-05",
  endDate: "2025-03-05",
  isRecurring: false,
  originalRecurringId: "event-123" // 참조용
}
```

---

## 9. 승인 및 이력

### 9.1 승인
- **PM**: PM Agent - 2025-01-29
- **기술 리드**: [검토 필요]
- **Product Owner**: [검토 필요]

### 9.2 변경 이력
| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| 1.0.0 | 2025-01-29 | PM Agent | 초안 작성 |

---

**다음 단계**: Architect 및 UX Expert에게 전달하여 기술 아키텍처 설계 및 UX 흐름 설계 진행
